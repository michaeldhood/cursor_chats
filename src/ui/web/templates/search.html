{% extends "base.html" %}

{% block title %}Search: {{ query }} - Cursor Chats{% endblock %}

{% block content %}
<h2>Search Results for "{{ query }}"</h2>

<div class="chat-list">
    {% if results %}
        {% for chat in results %}
        <div class="chat-item">
            <h3><a href="{{ url_for('chat_detail', chat_id=chat.id) }}">{{ chat.title or 'Untitled Chat' }}</a></h3>
            <div class="chat-meta">
                <span class="badge {{ chat.mode }}">{{ chat.mode }}</span>
                <span>Created: {{ chat.created_at[:10] if chat.created_at else 'Unknown' }}</span>
                {% if chat.workspace_path %}
                <span>Workspace: {{ chat.workspace_path }}</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="chat-item">
            <p>No results found for "{{ query }}".</p>
        </div>
    {% endif %}
</div>

{% if has_next %}
<div class="pagination">
    {% if page > 1 %}
    <a href="{{ url_for('search', q=query, page=page-1) }}">Previous</a>
    {% endif %}
    <span class="current">{{ page }}</span>
    <a href="{{ url_for('search', q=query, page=page+1) }}">Next</a>
</div>
{% endif %}
{% endblock %}

