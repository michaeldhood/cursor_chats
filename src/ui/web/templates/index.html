{% extends "base.html" %}

{% block title %}All Chats - Cursor Chats{% endblock %}

{% block content %}
<div class="chat-list">
    {% if chats %}
        {% for chat in chats %}
        <div class="chat-item">
            <h3><a href="{{ url_for('chat_detail', chat_id=chat.id) }}">{{ chat.title or 'Untitled Chat' }}</a></h3>
            <div class="chat-meta">
                <span class="badge {{ chat.mode }}">{{ chat.mode }}</span>
                <span>Created: {{ chat.created_at[:10] if chat.created_at else 'Unknown' }}</span>
                {% if chat.workspace_path %}
                <span>Workspace: {{ chat.workspace_path }}</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="chat-item">
            <p>No chats found. Run <code>python -m src ingest</code> to import chats from Cursor.</p>
        </div>
    {% endif %}
</div>

{% if total_chats > 50 %}
<div class="pagination">
    {% if page > 1 %}
    <a href="{{ url_for('index', page=page-1) }}">Previous</a>
    {% endif %}
    <span class="current">{{ page }}</span>
    {% if has_next %}
    <a href="{{ url_for('index', page=page+1) }}">Next</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}

